# 解决者信息和用户名功能测试指南

## 测试环境设置

1. **启动扩展开发环境**
   - 在VS Code中打开此项目
   - 按 `F5` 启动新的扩展开发窗口
   - 在新窗口中打开一个代码文件（或使用 `resolver-info-test.js`）

## 功能1: 用户名设置测试

### 步骤1: 设置用户名
1. 在扩展开发窗口中按 `Ctrl+Shift+P` 打开命令面板
2. 输入 "Set Username" 并选择 "Code Review Notes: Set Username"
3. 在弹出的输入框中输入您的用户名（例如："测试用户A"）
4. 确认输入

### 预期结果:
- 应该显示成功设置用户名的消息
- 后续添加的评论应该使用新设置的用户名

## 功能2: 解决者信息测试

### 步骤2: 创建和解决评论
1. 在代码文件中选择一行代码
2. 右键选择 "Add Comment" 或使用命令面板
3. 输入评论内容，例如："这里需要优化性能"
4. 提交评论
5. 在左侧的 "Code Review Notes" 树视图中找到刚创建的评论
6. 右键点击评论，选择 "Resolve Comment"

### 预期结果:
- 评论状态应该变为已解决
- 在树视图中应该显示 "(已解决 by [您的用户名])"
- 鼠标悬停在代码高亮上应该显示解决者信息和解决时间

## 功能3: 多用户场景测试

### 步骤3: 创建测试评论
1. 在扩展开发窗口中打开命令面板 (`Ctrl+Shift+P`)
2. 输入 "Create Test Comments" 并选择
3. 确认在当前活动文件中创建测试评论

### 预期结果:
- 应该创建多个测试评论，来自不同用户（Alice, Bob, Charlie, Diana）
- 其中一些评论应该已经是解决状态
- 应该能看到不同的解决者信息

## 功能4: 界面显示测试

### 步骤4A: 树视图显示
1. 查看左侧的 "Code Review Notes" 树视图
2. 检查已解决评论的显示格式

### 预期结果:
- 未解决评论: 显示正常的评论文本
- 已解决评论: 显示 "[评论文本] (已解决 by [解决者用户名])"

### 步骤4B: 悬停提示测试
1. 将鼠标悬停在代码中的评论高亮区域上

### 预期结果:
- 未解决评论: 显示标准的评论信息
- 已解决评论: 额外显示 "解决者: [用户名] ([解决时间])"

### 步骤4C: 全部评论视图测试
1. 查看 "All Comments" 树视图
2. 检查显示的解决者信息

## 功能5: 边界情况测试

### 步骤5A: 空用户名测试
1. 尝试设置空用户名
2. 检查系统是否正确处理

### 步骤5B: 特殊字符用户名测试
1. 尝试设置包含特殊字符的用户名（如："用户@123", "测试-用户"）
2. 检查显示是否正常

### 步骤5C: 长用户名测试
1. 尝试设置很长的用户名
2. 检查界面显示是否正常

## 验证检查清单

- [ ] 用户名设置功能正常工作
- [ ] 新添加的评论使用正确的用户名
- [ ] 解决评论时正确记录解决者信息
- [ ] 树视图正确显示解决者信息
- [ ] 悬停提示正确显示解决者和时间信息
- [ ] 测试评论创建功能正常
- [ ] 多用户场景下解决者信息显示正确
- [ ] 界面在不同用户名长度下显示正常
- [ ] 所有功能向后兼容（旧评论仍然正常显示）

## 故障排除

### 如果命令不可用:
1. 确保扩展正确编译（`npm run compile`）
2. 重新启动扩展开发窗口（关闭并重新按 F5）
3. 检查开发者控制台是否有错误信息

### 如果解决者信息不显示:
1. 确保使用的是新创建的评论
2. 检查是否正确设置了用户名
3. 尝试刷新树视图

### 如果悬停信息不显示:
1. 确保鼠标悬停在正确的高亮区域
2. 尝试重新加载文件
3. 检查评论是否确实已解决

## 性能测试

创建大量评论（50+）来测试：
1. 界面响应性
2. 解决者信息的显示性能
3. 树视图的更新速度

## 预期改进

基于测试结果，可能需要的改进：
1. 用户名输入验证
2. 解决者信息的格式优化
3. 长用户名的显示优化
4. 批量操作的性能优化
